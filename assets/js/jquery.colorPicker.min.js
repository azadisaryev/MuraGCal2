/*
* Really Simple Color Picker in jQuery
* 
* Licensed under the MIT (MIT-LICENSE.txt) licenses.
*
* Copyright (c) 2008 Lakshan Perera (www.laktek.com)
*                    Daniel Lacy (daniellacy.com)
*
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to
* deal in the Software without restriction, including without limitation the
* rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
* sell copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in
* all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR 
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
* IN THE SOFTWARE.
*/
/*
* Modified for MuraGCal2 plugin by Azadi Saryev https://github.com/azadisaryev
* Original plugin at https://github.com/laktek/really-simple-color-picker
*/(function(a){var b,c,d=0,e={control:a('<div class="colorPicker-picker">Â </div>'),palette:a('<div id="colorPicker_palette" class="colorPicker-palette" />'),swatch:a('<div class="colorPicker-swatch">&nbsp;</div>'),hexField:a('<input type="hidden" id="colorPicker_hex" />')},f="transparent",g;a.fn.colorPicker=function(b){return this.each(function(){var c=a(this),g=a.extend({},a.fn.colorPicker.defaults,b),h=a.fn.colorPicker.toHex(c.val().length>0?c.val():g.pickerDefault),i=e.control.clone(),j=e.palette.clone().attr("id","colorPicker_palette-"+d),k=e.hexField.clone(),l=j[0].id,m;a.each(g.colors,function(b){m=e.swatch.clone();if(g.colors[b]===f){m.addClass(f).text("X");a.fn.colorPicker.bindPalette(k,m,f)}else{m.css("background-color","#"+this);a.fn.colorPicker.bindPalette(k,m)}m.appendTo(j)});k.attr({id:"colorPicker_hex-"+d,value:h});k.bind("keydown",function(b){if(b.keyCode===13){a.fn.colorPicker.changeColor(a.fn.colorPicker.toHex(a(this).val()))}if(b.keyCode===27){a.fn.colorPicker.hidePalette(l)}});a('<div class="colorPicker_hexWrap" />').append(k).appendTo(j);a("body").append(j);j.hide();i.css("background-color",h);i.bind("click",function(){a.fn.colorPicker.togglePalette(a("#"+l),a(this))});c.after(i);c.bind("change",function(){c.next(".colorPicker-picker").css("background-color",a.fn.colorPicker.toHex(a(this).val()))});c.val(h).hide();d++})};a.extend(true,a.fn.colorPicker,{toHex:function(a){if(a.match(/[0-9A-F]{6}|[0-9A-F]{3}$/i)){return a.charAt(0)==="#"?a:"#"+a}else if(a.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/)){var b=[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10)],c=function(a){if(a.length<2){for(var b=0,c=2-a.length;b<c;b++){a="0"+a}}return a};if(b.length===3){var d=c(b[0].toString(16)),e=c(b[1].toString(16)),f=c(b[2].toString(16));return"#"+d+e+f}}else{return false}},checkMouse:function(d,e){var f=c,g=a(d.target).parents("#"+f.attr("id")).length;if(d.target===a(f)[0]||d.target===b||g>0){return}a.fn.colorPicker.hidePalette()},hidePalette:function(b){a(document).unbind("mousedown",a.fn.colorPicker.checkMouse);a(".colorPicker-palette").hide()},showPalette:function(c){var d=b.prev("input").val();c.css({top:b.offset().top+b.outerHeight(),left:b.offset().left});a("#color_value").val(d);c.show();a(document).bind("mousedown",a.fn.colorPicker.checkMouse)},togglePalette:function(d,e){if(e){b=e}c=d;if(c.is(":visible")){a.fn.colorPicker.hidePalette()}else{a.fn.colorPicker.showPalette(d)}},changeColor:function(c){b.css("background-color",c);b.prev("input").val(c).change();a.fn.colorPicker.hidePalette()},bindPalette:function(c,d,e){e=e?e:a.fn.colorPicker.toHex(d.css("background-color"));d.bind({click:function(b){g=e;a.fn.colorPicker.changeColor(e)},mouseover:function(b){g=c.val();a(this).css("border-color","#598FEF");c.val(e)},mouseout:function(d){a(this).css("border-color","#000");c.val(b.css("background-color"));c.val(g)}})}});a.fn.colorPicker.defaults={pickerDefault:"30487E",colors:["CC3333","DD4477","994499","6633CC","336699","3366CC","22AA99","329262","109618","66AA00","AAAA11","D6AE00","EE8800","DD5511","A87070","8C6D8C","627487","7083A8","5C8D87","898951","B08B59","9F3501","8A2D38","962181","402175","30487E","182186","1F753C","3D8215","5A9A08","81910B","9D7000","AA5A00","8D4500","743500","870B50","70237F","25617D","515151","227F63","A59114","871111"],addColors:[]}})(jQuery)